<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지역, 테마별 코스</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://korean.visitkorea.or.kr/resources/images/favicon.ico">
    <link rel="icon" type="image/ico" href="../images/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
</head>
<body>
    <header class="header">
        
    </header>
    <main class="main">
        <div class="course_title_wrap">
            <div class="course_titleContent_box">
                <h2 class="course_title">추천코스</h2>
            </div>
        </div>
        <div class="course_subGnb_wrap">
            <div class="course_subGnbContent_wrap">
                <ul class="course_subGnbList">
                    <li class="course_subGnbListFirstItem">
                        <a class="course_subGnbListFirstItemLink" href="#none">
                            <img src="images/home_ic.jpg" alt="메인 페이지로">
                        </a>
                    </li>
                    <li class="course_subGnbListItem">
                        <span class="course_subGnbListItemText">여행정보</span>
                    </li>
                    <li class="course_subGnbListItem">
                        <a class="course_subGnbListItemLink" href="#none">
                            추천코스
                            <span class="course_subGnbListItemLinkText"></span>
                            <i class="fa-solid fa-caret-down course_subGnbListItemLinkTriangle"></i>
                        </a>
                    </li>
                </ul>
                <div class="course_subGnbSns_box">
                    <ul class="course_subGnbSnsFuncList">
                        <li class="course_subGnbSnsFuncListItem">
                            <a href="#none">
                                <img src="images/mail_ic.png" alt="">
                            </a>
                        </li>
                        <li class="course_subGnbSnsFuncListItem">
                            <a href="#none">
                                <img src="images/print_ic.png" alt="">
                            </a>
                        </li>
                    </ul>
                    <ul class="course_subGnbSnsList">
                        <li class="course_subGnbSnsListItem course_subGnbSnsListItem--noMargin">
                            <a href="#none">
                                <img class="course_subGnbSnsListItemLinkImg" src="images/copy2_ic.png" alt="">
                            </a>
                        </li>
                        <li class="course_subGnbSnsListItem">
                            <a href="#none">
                                <img class="course_subGnbSnsListItemLinkImg" src="images/face_ic.png" alt="">
                            </a>
                        </li>
                        <li class="course_subGnbSnsListItem">
                            <a href="#none">
                                <img class="course_subGnbSnsListItemLinkImg" src="images/twi_ic.png" alt="">
                            </a>
                        </li>
                        <li class="course_subGnbSnsListItem">
                            <a href="#none">
                                <img class="course_subGnbSnsListItemLinkImg" src="images/kakao_ic.png" alt="">
                            </a>
                        </li>
                        <li class="course_subGnbSnsListItem">
                            <a href="#none">
                                <img class="course_subGnbSnsListItemLinkImg" src="images/naver_ic.png" alt="">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="main_content">
            <section class="course_courseLnb_box">
                <ul class="course_courseLnbList">
                    <li class="course_courseLnbListItem">
                        <a class="course_courseLnbListItemLink" href="../course/course.html">
                            <h3 class="course_courseLnbListItemLinkTitle course_courseLnbListItemLinkTitle--blue">지역, 테마별 코스</h3>
                        </a>
                    </li>
                    <li class="course_courseLnbListItem">
                        <a class="course_courseLnbListItemLink" href="../course/courseUser.html">
                            <h3 class="course_courseLnbListItemLinkTitle">프로계획러 사용자가 직접 만든 풀코스 여행</h3>
                        </a>
                    </li>
                </ul>
            </section>
            <section class="course_search_wrap">
                <section class="course_search_box">
                    <form id="filterForm">
                        <div class="course_form">
                            <div class="course_formRegionHashtag_wrap">
                                <div class="course_regionFilter_box">
                                    <label class="course_regionfilterLabel">지역</label>
                                    <select id="regionFilter" class="course_regionFilterSelect">
                                        <option value="">전체</option>
                                        <option value="1">서울</option>
                                        <option value="6">부산</option>
                                        <option value="4">대구</option>
                                        <option value="2">인천</option>
                                        <option value="5">광주</option>
                                        <option value="3">대전</option>
                                        <option value="7">울산</option>
                                        <option value="8">세종</option>
                                        <option value="31">경기</option>
                                        <option value="32">강원</option>
                                        <option value="33">충북</option>
                                        <option value="34">충남</option>
                                        <option value="35">경북</option>
                                        <option value="36">경남</option>
                                        <option value="37">전북</option>
                                        <option value="38">전남</option>
                                        <option value="39">제주</option>
                                    </select>
                                </div>
                                <div class="course_hastagFilter_box">
                                    <label class="course_hashtagfilterLabel">해시태그</label>
                                    <select id="hashtagFilter" class="course_hashtagFilterSelect">
                                        <option value="">전체</option>
                                        <option value="C0112">#가족코스</option>
                                        <option value="C0113">#나홀로코스</option>
                                        <option value="C0114">#힐링코스</option>
                                        <option value="C0115">#도보코스</option>
                                        <option value="C0116">#캠핑코스</option>
                                        <option value="C0117">#맛코스</option>
                                    </select>
                                </div>
                            </div>
                            <div class="course_searchFilter_box">
                                <label class="course_searchFilterLabel">키워드</label>
                                <input id="searchFilter" class="course_searchFilterInput" type="text" placeholder="검색어를 입력하세요">
                            </div>
                        </div>
                        <button class="course_formButton">검색</button>
                    </form>
                </section>
            </section>
            <section class="course_content_wrap">
                <ul class="course_contentListChange_box">
                    <!-- <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/5b3807fa-9d2b-4e67-a152-1f2ff03ce7c9.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">태곳적 한반도를 만나 오늘의 나를 새롭게하는 리버스(re-birth) 코스</h4>
                                <p class="course_contentListItemTextLinkText">연천, 철원, 화천, 인제, 고성에서 태곳적 한반도를 엿볼 수 있다. 깊고 깊은 숲과 호수의 자연 속을 거니는 코스로 잘 가꿔진 수목원과 최전방 통일 전망대를 두루 만난다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">경기 연천군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/fd2bea3d-8493-4719-b61d-ecbd65ffe8e6.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">너무 아름다운 뷰! 뷰! 뷰! 멋진 전망만 쏙 골라 놓은 코스</h4>
                                <p class="course_contentListItemTextLinkText">민족의 얼이 잉태된 마니산과 역사와 전설이 얽힌 고찰 전등사 근처에는 대형 카페도 많다. 김포로 넘어오면 차에서 내려 북한부터 서울 삼각산까지 조망 가능한 문수산성을 거닐며 수려한 풍광을 감상해보자.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">인천 강화군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/92217307-30f2-4483-bd37-3f8942b935a9.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">서해 최북단에서 나를 인증해보기! 신분증 지참 필수 코스</h4>
                                <p class="course_contentListItemTextLinkText">옹진군과 강화군, 김포시로 구성된 코스로 서해 최북단 섬과 검문소를 통과해야 하는 연륙도, 북녘을 바라볼 수 있는 언덕 위 전망대까지 둘러본다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">인천 옹진군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/a4cadf70-4f23-4716-94ae-423a3afa5a61.JPG" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">알짜배기 명소만 골라 놓은 꽤 잘 빠진 DMZ 핫플레이스 코스</h4>
                                <p class="course_contentListItemTextLinkText">아름다운 경관과 인생샷에 모든 걸 걸었다면? 이색적인 외관의 박물관, 이색적인 베이커리 카페, 소이산의 멋진 경관까지! 알찬 당일 여행 코스로 강력 추천</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">경기도 연천군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/3cdc6db3-4093-4d11-aebb-3a069a564ead.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">예술과 자연을 하나의 작품으로 만나는 여행 코스</h4>
                                <p class="course_contentListItemTextLinkText">강원도 접경지역의 건축과 문화예술을 만나는 코스로 DMZ만의 역사적 장소와 천혜의 자연을 함께 확인한다. 만해 한용운의 "님의 침묵"을 집필한 백담사와 만해마을은 민족 문학의 정신이 살아있는 곳이다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">강원 철원군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/49bb64bc-6945-4f61-8f7d-965243149e71.JPG" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">카페 마니아 주목! 컨셉부터 남다른 카페 투어 코스!</h4>
                                <p class="course_contentListItemTextLinkText">옹진군, 강화군, 파주시로 이어지는 코스로 섬 아닌 섬 풍경을 지닌 연륙도, 건축과 책이 어우러진 도심, 곤돌라 타고 임진강 건너 갤러리까지 돌아본다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">경기도 파주시</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/d6dacd62-1e77-4cda-95d0-98b870d56159.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">레트로 핫플레이스부터 최신 핫플레이스까지 뜨거운 핫 코스</h4>
                                <p class="course_contentListItemTextLinkText">강화 교동도부터 시작해 김포와 파주까지, 접경 지역의 자연과 문화, 역사, 생태 공원을 돌아보고 임진강을 건너는 DMZ 유일의 곤돌라를 타며, 서울 근교에서 드라이브, 나들이하기 좋은 당일 여행 코스</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">인천 강화군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/e4468c92-8ddb-445a-858b-0baccb2c4b97.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">제대로 요약정리한 안보 관광명소 모음 코스</h4>
                                <p class="course_contentListItemTextLinkText">화천군, 양구군과 고성군으로 이어진 코스로 북녘땅을 바라보고, 때 묻지 않은 순수한 자연과 무지개 해안도로까지 이어지는 안보 관광명소 모음 코스</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">강원도 화천군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/22a3996e-8c58-4c50-8b45-4bbe6f55b72c.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">낯선 곳에서 만나는 낯선 나와의 선 넘는 여행 코스</h4>
                                <p class="course_contentListItemTextLinkText">연천군과 철원군, 화천군으로 이어진 민통선 접경지를 돌아보는 코스로 한국전쟁의 역사 현장을 눈앞에서 만난다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">경기도 연천군</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li>
                    <li class="course_contentListItem">
                        <div class="course_contentListItemImg_box">
                            <a class="course_contentListItemLink" href="#none">
                                <img class="course_contentListItemLinkImg" src="images/44296c57-f1a5-427a-9bfe-5ac7808f596d.jpg" alt="">
                            </a>
                        </div>
                        <div class="course_contentListItemText_box">
                            <a class="course_contentListItemTextLink" href="#none">
                                <h4 class="course_contentListItemTextLinkTitle">어느 계절, 어느 누구와 함께해도 남부럽지 않은 코스</h4>
                                <p class="course_contentListItemTextLinkText">파주시와 연천군, 철원군에서 만나는 코스로 다양한 식물과 꽃이 만발하는 수목원부터 가을날 붉게 물드는 댑싸리 군락지까지! 어느 계절에 와도 오색찬란한 풍경이 펼쳐진다.</p>
                            </a>
                            <ul class="course_contentListItemTextList">
                                <li class="course_contentListItemTextListRegion">경기도 파주시</li>
                                <li class="course_contentListItemTextListHashtag">#추천코스</li>
                            </ul>
                        </div>
                    </li> -->
                </ul>
            </section>
            <div class="course_page_wrap">
                <div class="course_pageContent_box">
                    <a class="course_pageBtn course_pageContentLink" href="#none">1</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">2</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">3</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">4</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">5</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">6</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">7</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">8</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">9</a>
                    <a class="course_pageBtn course_pageContentLink" href="#none">10</a>
                </div>
            </div>
        </div>
    </main>
    <footer class="footer">
        
    </footer>
    <div class="loading hidden">
        <div class="loading_element loading--first">
            <div class="circle circle--red"></div>
        </div>
        <div class="loading_element loading--second">
            <div class="circle circle--blue"></div>
        </div>
        <div class="loading_element loading--third">
            <div class="circle circle--green"></div>
        </div>
        <div class="loading_element loading--fourth">
            <div class="circle circle--yellow"></div>
        </div>        
    </div>
    <script>
        $(".header").load('../header/header.html');
        $(".footer").load('../footer/footer.html');
    </script>
    <script>
        // 로딩창
        const loadingPage = document.querySelector('.loading');
        // loadingPage.classList.remove('hidden');

        // 지역 선택값을 저장하는 변수
        let currentRegion='';
        // 해시태그 선택값을 저장하는 변수
        let currentHashtag='';
        // 사용자가 검색한 값을 저장하는 변수
        let currentEncodedData;

        // 폼 태그를 지정
        const filterForm = document.getElementById('filterForm');
        // 폼 태그 안 지역 필터를 지정
        const regionFilter = document.getElementById('regionFilter');
        // 폼 태그 안 해시태그 필터를 지정
        const hashtagFilter = document.getElementById('hashtagFilter');
        // 폼 태그 안 검색어 필터를 지정
        const searchFilter = document.getElementById('searchFilter');
        // 검색 버튼
        const filterButton = document.querySelector('.course_formButton');
        // 컨텐츠가 로드되는 영역
        const courseContent = document.querySelector('.course_content_wrap');
        // 페이지 버튼이 로드되는 영역
        const buttonBox = document.querySelector('.course_pageContent_box');

        // 현재 페이지
        const itemsPerPage = 10;
        let currentPage = 1;

        // 폼 태그의 검색 이벤트를 제거한다.
        filterForm.addEventListener('submit', (event)=>{
            event.preventDefault();
        })

        // 사용자의 검색 데이터를UTF-8 문자열로 반환한 후 변수에 할당한다.
        function encodeUTF8(){
            currentEncodedData=encodeURIComponent(searchFilter.value);
        }

        async function fetchDataByCategory(){
            const response = await fetch(`https://apis.data.go.kr/B551011/KorService1/areaBasedList1?serviceKey=l7EHYHuiiu9sj%2FQ%2FdFHDmkz1KuLKAgruMyV8baTn%2BXdKBGLcfpeEDGf03M4tnfm6YRwOozTr1GXwSSK31gvFVg%3D%3D&pageNo=${currentPage}&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=Q&areaCode=${currentRegion}&contentTypeId=25&cat1=C01&cat2=${currentHashtag}&_type=json`);
            const jsonData = await response.json();
            return jsonData;
        }

        async function fetchDataByInput(){
            const response = await fetch(`https://apis.data.go.kr/B551011/KorService1/searchKeyword1?serviceKey=l7EHYHuiiu9sj%2FQ%2FdFHDmkz1KuLKAgruMyV8baTn%2BXdKBGLcfpeEDGf03M4tnfm6YRwOozTr1GXwSSK31gvFVg%3D%3D&pageNo=${currentPage}&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=Q&contentTypeId=25&keyword=${currentEncodedData}&_type=json`);
            const jsonData = await response.json();
            return jsonData;
        }

        async function fetchDataMoreInfo(courseId){
            const response = await fetch(`https://apis.data.go.kr/B551011/KorService1/detailCommon1?serviceKey=l7EHYHuiiu9sj%2FQ%2FdFHDmkz1KuLKAgruMyV8baTn%2BXdKBGLcfpeEDGf03M4tnfm6YRwOozTr1GXwSSK31gvFVg%3D%3D&pageNo=1&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&contentId=${courseId}&contentTypeId=25&overviewYN=Y&_type=json`);
            const jsonData = await response.json();
            return jsonData;
        }

        filterButton.addEventListener('click', async ()=>{
            currentPage=1;
            currentRegion=regionFilter.value;
            currentHashtag=hashtagFilter.value;
            encodeUTF8();
            courseRenderHTML();
        })

        async function courseRenderHTML(){
            loadingPage.classList.remove('hidden');
            if(currentEncodedData){
                try{
                    courseContent.innerHTML='';
                    const jsonData = await fetchDataByInput();
                    const jsonDataArray = jsonData.response.body.items.item;
                    const totalPages = Math.ceil(jsonData.response.body.totalCount / itemsPerPage);
                    await insertHTML(jsonDataArray);
                    createPageButtons(totalPages);
                    loadingPage.classList.add('hidden');
                } catch(error){
                    buttonBox.innerHTML='';
                    loadingPage.classList.add('hidden');
                    window.alert('검색된 데이터가 없습니다.');
                }
            } else{
                try{
                    courseContent.innerHTML='';
                    const jsonData = await fetchDataByCategory();
                    const jsonDataArray = jsonData.response.body.items.item;
                    const totalPages = Math.ceil(jsonData.response.body.totalCount / itemsPerPage);
                    await insertHTML(jsonDataArray);
                    createPageButtons(totalPages);
                    loadingPage.classList.add('hidden');
                } catch(error){
                    buttonBox.innerHTML='';
                    loadingPage.classList.add('hidden');
                    window.alert('검색된 데이터가 없습니다.');
                }
            }
        }

        async function insertHTML(jsonDataArray){
            const newUl = document.createElement('ul');
            newUl.className='course_contentListChange_box'
            for (const data of jsonDataArray){
                const courseRenderImageUrl = data.firstimage ? data.firstimage : 'https://play-lh.googleusercontent.com/6lRtpyZB4xCFnj1WUUoZC12I_88BoTn48LIjUe0FvHdP4zD0oYc5JpAKMNB5-jTAxKY=w600-h300-pc0xffffff-pd';
                const courseId = data.contentid;
                let courseRenderAddr;
                let courseRenderHashtag;
                let courseRenderOverview;

                if(data.addr1){
                    courseRenderAddr=data.addr1;
                } else if(data.addr2){
                    courseRenderAddr=data.addr2;
                } else{
                    courseRenderAddr='전국';
                }

                if(data.cat2){
                    switch (data.cat2){
                        case 'C0112':
                            courseRenderHashtag='#가족코스';
                            break;
                        
                        case 'C0113':
                            courseRenderHashtag='#나홀로코스';
                            break;
                        
                        case 'C0114':
                            courseRenderHashtag='#힐링코스';
                            break;

                        case 'C0115':
                            courseRenderHashtag='#도보코스';
                            break;

                        case 'C0116':
                            courseRenderHashtag='#캠핑코스';
                            break;

                        case 'C0117':
                            courseRenderHashtag='#맛코스';
                            break;
                    }
                } else{
                    courseRenderHashtag='#추천코스'
                }

                const detailedData = await fetchDataMoreInfo(courseId);
                courseRenderOverview=detailedData.response.body.items.item[0].overview;

                newUl.insertAdjacentHTML('beforeend', `<li class="course_contentListItem">
                    <div class="course_contentListItemImg_box">
                        <a class="course_contentListItemLink" href="../course/courseContent.html">
                            <img class="course_contentListItemLinkImg" src=${courseRenderImageUrl} alt="">
                        </a>
                    </div>
                    <div class="course_contentListItemText_box">
                        <a class="course_contentListItemTextLink" href="../course/courseContent.html">
                            <h4 class="course_contentListItemTextLinkTitle">${data.title}</h4>
                            <p class="course_contentListItemTextLinkText">${courseRenderOverview}</p>
                        </a>
                        <ul class="course_contentListItemTextList">
                            <li class="course_contentListItemTextListRegion">${courseRenderAddr}</li>
                            <li class="course_contentListItemTextListHashtag">${courseRenderHashtag}</li>
                        </ul>
                    </div>
                </li>`)
            }
            courseContent.insertAdjacentElement('afterbegin', newUl);
        }

        function createPageButtons(totalPages){
            buttonBox.innerHTML='';

            const maxButtons = 10;
            const maxPagesPerGroup = 10;

            let startPage = Math.floor((currentPage-1)/maxPagesPerGroup) * maxPagesPerGroup + 1;
            let endPage = startPage + maxButtons - 1;

            if(endPage > totalPages){
                endPage = totalPages;
            }

            if (currentPage > 1){
                const prevButton = document.createElement('button');
                prevButton.className='course_pageBtn course_pageBtn--prev';
                prevButton.textContent = '이전';
                prevButton.addEventListener('click', ()=>{
                    currentPage--;
                    courseRenderHTML();
                })
                buttonBox.appendChild(prevButton);
            }

            // 페이지 버튼 생성
            for (let i = startPage; i <= endPage; i++){
                const button = document.createElement('button');
                button.className='course_pageBtn';
                button.textContent=i;

                // 현재 페이지와 일치하는 버튼에 클래스 부여
                if (i == currentPage){
                    button.classList.add('course_pageBtn--on')
                }

                button.addEventListener('click', () => {
                    currentPage=i;
                    courseRenderHTML();
                });
                buttonBox.appendChild(button);
            }

            // 다음 버튼 생성
            if (currentPage < totalPages){
                const nextButton = document.createElement('button');
                nextButton.className='course_pageBtn course_pageBtn--next';
                nextButton.textContent='다음';
                nextButton.addEventListener('click', ()=>{
                    currentPage++;
                    courseRenderHTML();
                })
                buttonBox.appendChild(nextButton);
            }

        }

        initializePage();
        async function initializePage(){
            loadingPage.classList.remove('hidden');
            courseContent.innerHTML='';
            const jsonData = await fetchDataByCategory();
            const jsonDataArray = jsonData.response.body.items.item;
            const totalPages = Math.ceil(jsonData.response.body.totalCount / itemsPerPage);
            await insertHTML(jsonDataArray);
            createPageButtons(totalPages);
            loadingPage.classList.add('hidden');
        }

    </script>
</body>
</html>